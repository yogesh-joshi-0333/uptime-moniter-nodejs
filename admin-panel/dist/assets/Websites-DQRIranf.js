import{o as e,a as t,C as l,g as a,z as s,B as n,f as o,p as r,k as i,A as u,m as c,L as d,E as v,Q as m,q as p,y as g,r as y,M as x,N as b,R as f,x as k,c as h,F as w,l as C,e as _}from"./vendor-CszhsB1H.js";import{_ as j,c as E,a as L}from"./index-BWaFKzkF.js";import{_ as M}from"./EmptyState-Dau_j8o7.js";import{_ as S}from"./LoadingSpinner-BAJStyFw.js";const W={key:0,class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},z={class:"text-lg font-semibold text-gray-900 dark:text-white"},B={class:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},A={key:1,class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3"},U=j({__name:"Modal",props:{show:Boolean,title:String,size:{type:String,default:"md",validator:e=>["sm","md","lg","xl"].includes(e)}},emits:["close"],setup(g,{emit:y}){const x=g,b=y,f={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};function k(e){"Escape"===e.key&&x.show&&b("close")}return e(()=>{document.addEventListener("keydown",k)}),t(()=>{document.removeEventListener("keydown",k)}),(e,t)=>(a(),l(m,{to:"body"},[s(v,{name:"modal"},{default:n(()=>[g.show?(a(),o("div",{key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t[1]||(t[1]=d(e=>b("close"),["self"]))},[i("div",{class:c(["bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-h-[90vh] overflow-hidden",f[g.size]])},[g.title||e.$slots.header?(a(),o("div",W,[u(e.$slots,"header",{},()=>[i("h3",z,p(g.title),1)],!0),i("button",{onClick:t[0]||(t[0]=e=>b("close")),class:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},[...t[2]||(t[2]=[i("svg",{class:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):r("",!0),i("div",B,[u(e.$slots,"default",{},void 0,!0)]),e.$slots.footer?(a(),o("div",A,[u(e.$slots,"footer",{},void 0,!0)])):r("",!0)],2)])):r("",!0)]),_:3})]))}},[["__scopeId","data-v-ad19ab2c"]]),V={class:"text-center sm:text-left"},H={key:0,class:"h-6 w-6 text-danger-600 dark:text-danger-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},T={key:1,class:"h-6 w-6 text-warning-600 dark:text-warning-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},N={key:2,class:"h-6 w-6 text-primary-600 dark:text-primary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},R={class:"text-gray-600 dark:text-gray-300"},$=["disabled"],D=["disabled"],q={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24"},I={__name:"ConfirmDialog",props:{show:Boolean,title:{type:String,default:"Confirm Action"},message:String,confirmText:{type:String,default:"Confirm"},cancelText:{type:String,default:"Cancel"},variant:{type:String,default:"danger",validator:e=>["danger","warning","primary"].includes(e)},loading:Boolean},emits:["confirm","cancel"],setup(e,{emit:t}){const s=t,u={danger:"btn-danger",warning:"bg-warning-500 text-white hover:bg-warning-600",primary:"btn-primary"};return(t,d)=>(a(),l(U,{show:e.show,title:e.title,size:"sm",onClose:d[2]||(d[2]=e=>s("cancel"))},{footer:n(()=>[i("button",{onClick:d[0]||(d[0]=e=>s("cancel")),class:"btn-secondary",disabled:e.loading},p(e.cancelText),9,$),i("button",{onClick:d[1]||(d[1]=e=>s("confirm")),class:c(["btn",u[e.variant]]),disabled:e.loading},[e.loading?(a(),o("svg",q,[...d[6]||(d[6]=[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):r("",!0),g(" "+p(e.confirmText),1)],10,D)]),default:n(()=>[i("div",V,[i("div",{class:c(["mx-auto sm:mx-0 flex items-center justify-center h-12 w-12 rounded-full mb-4","danger"===e.variant?"bg-danger-50 dark:bg-danger-500/20":"warning"===e.variant?"bg-warning-50 dark:bg-warning-500/20":"bg-primary-50 dark:bg-primary-500/20"])},["danger"===e.variant?(a(),o("svg",H,[...d[3]||(d[3]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1)])])):"warning"===e.variant?(a(),o("svg",T,[...d[4]||(d[4]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1)])])):(a(),o("svg",N,[...d[5]||(d[5]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))],2),i("p",R,p(e.message),1)])]),_:1},8,["show","title"]))}},F={class:"space-y-6"},Q={class:"card p-4"},G={class:"flex flex-col sm:flex-row gap-4"},J={class:"flex-1"},K={class:"relative"},O={key:0,class:"card p-12"},P={key:3,class:"card overflow-hidden"},X={class:"overflow-x-auto"},Y={class:"table"},Z={class:"divide-y divide-gray-200 dark:divide-gray-700"},ee=["onClick"],te={class:"flex items-center gap-3"},le={class:"font-medium text-gray-900 dark:text-white"},ae={class:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-xs"},se={class:"text-gray-700 dark:text-gray-300"},ne={class:"text-gray-500 dark:text-gray-400 text-sm"},oe={class:"text-gray-700 dark:text-gray-300"},re={class:"flex items-center justify-end gap-2"},ie=["onClick"],ue=["onClick"],ce=["disabled"],de={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24"},ve=["disabled"],me={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24"},pe={__name:"Websites",setup(t){const u=_(),v=E(),m=L(),j=y(!0),W=y(""),z=y("all"),B=y(!1),A=y(!1),V=y(!1),H=y(!1),T=y({url:"",interval_seconds:60,name:"",notification_email:""}),N=y(null),R=y(null),$=h(()=>{let e=v.websites;if(W.value){const t=W.value.toLowerCase();e=e.filter(e=>{var l;return e.url.toLowerCase().includes(t)||(null==(l=e.name)?void 0:l.toLowerCase().includes(t))})}return"all"!==z.value&&(e=e.filter(e=>e.lastStatus===z.value)),e});function D(){T.value={url:"",interval_seconds:60,name:"",notification_email:""},B.value=!0}async function q(){if(!T.value.url)return void m.error("URL is required");H.value=!0;const e=await v.addWebsite(T.value);H.value=!1,e.success?(m.success("Website added successfully"),B.value=!1):m.error(e.error)}async function pe(){if(!T.value.url)return void m.error("URL is required");H.value=!0;const e=await v.updateWebsite(N.value.id,T.value);H.value=!1,e.success?(m.success("Website updated successfully"),A.value=!1,N.value=null):m.error(e.error)}async function ge(){H.value=!0;const e=await v.deleteWebsite(R.value.id);H.value=!1,e.success?(m.success("Website deleted successfully"),V.value=!1,R.value=null):m.error(e.error)}return e(async()=>{j.value=!0,await v.fetchWebsites(),j.value=!1}),(e,t)=>{var m;return a(),o("div",F,[i("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},[t[17]||(t[17]=i("div",null,[i("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Websites"),i("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Manage your monitored websites ")],-1)),i("button",{onClick:D,class:"btn-primary"},[...t[16]||(t[16]=[i("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),g(" Add Website ",-1)])])]),i("div",Q,[i("div",G,[i("div",J,[i("div",K,[x(i("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>W.value=e),type:"text",placeholder:"Search websites...",class:"input pl-10"},null,512),[[b,W.value]]),t[18]||(t[18]=i("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),x(i("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>z.value=e),class:"select w-full sm:w-48"},[...t[19]||(t[19]=[i("option",{value:"all"},"All Status",-1),i("option",{value:"up"},"Up",-1),i("option",{value:"down"},"Down",-1)])],512),[[f,z.value]])])]),j.value?(a(),o("div",O,[s(S,{size:"lg"})])):k(v).websites.length?$.value.length?(a(),o("div",P,[i("div",X,[i("table",Y,[t[23]||(t[23]=i("thead",null,[i("tr",null,[i("th",null,"Website"),i("th",null,"Status"),i("th",null,"Interval"),i("th",null,"Last Check"),i("th",null,"Response Time"),i("th",{class:"text-right"},"Actions")])],-1)),i("tbody",Z,[(a(!0),o(w,null,C($.value,e=>{return a(),o("tr",{key:e.id,class:"cursor-pointer",onClick:t=>function(e){u.push(`/websites/${e.id}`)}(e)},[i("td",null,[i("div",te,[t[20]||(t[20]=i("div",{class:"w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center"},[i("svg",{class:"w-4 h-4 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})])],-1)),i("div",null,[i("p",le,p(e.name||e.url),1),i("p",ae,p(e.url),1)])])]),i("td",null,[i("span",{class:c(["badge","down"===e.lastStatus?"badge-danger":"up"===e.lastStatus?"badge-success":"badge-warning"])},p(e.lastStatus||"pending"),3)]),i("td",null,[i("span",se,p(e.interval_seconds)+"s",1)]),i("td",null,[i("span",ne,p((l=e.lastChecked,l?new Date(l).toLocaleString():"-")),1)]),i("td",null,[i("span",oe,p(e.lastResponseTime||"-")+" ms",1)]),i("td",{class:"text-right",onClick:t[2]||(t[2]=d(()=>{},["stop"]))},[i("div",re,[i("button",{onClick:t=>function(e){N.value=e,T.value={url:e.url,interval_seconds:e.interval_seconds,name:e.name||"",notification_email:e.notification_email||""},A.value=!0}(e),class:"btn-icon text-gray-500 hover:text-primary-600",title:"Edit"},[...t[21]||(t[21]=[i("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,ie),i("button",{onClick:t=>function(e){R.value=e,V.value=!0}(e),class:"btn-icon text-gray-500 hover:text-danger-600",title:"Delete"},[...t[22]||(t[22]=[i("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ue)])])],8,ee);var l}),128))])])])])):(a(),l(M,{key:2,title:"No websites found",description:"Try adjusting your search or filters.",icon:"search"})):(a(),l(M,{key:1,title:"No websites yet",description:"Add your first website to start monitoring its uptime.","action-label":"Add Website",onAction:D})),s(U,{show:B.value,title:"Add Website",onClose:t[8]||(t[8]=e=>B.value=!1)},{footer:n(()=>[i("button",{onClick:t[7]||(t[7]=e=>B.value=!1),class:"btn-secondary"},"Cancel"),i("button",{onClick:q,disabled:H.value,class:"btn-primary"},[H.value?(a(),o("svg",de,[...t[29]||(t[29]=[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):r("",!0),t[30]||(t[30]=g(" Add Website ",-1))],8,ce)]),default:n(()=>[i("form",{onSubmit:d(q,["prevent"]),class:"space-y-4"},[i("div",null,[t[24]||(t[24]=i("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[g(" URL "),i("span",{class:"text-danger-500"},"*")],-1)),x(i("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>T.value.url=e),type:"url",class:"input",placeholder:"https://example.com",required:""},null,512),[[b,T.value.url]])]),i("div",null,[t[25]||(t[25]=i("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Name (optional) ",-1)),x(i("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>T.value.name=e),type:"text",class:"input",placeholder:"My Website"},null,512),[[b,T.value.name]])]),i("div",null,[t[27]||(t[27]=i("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Check Interval ",-1)),x(i("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>T.value.interval_seconds=e),class:"select"},[...t[26]||(t[26]=[i("option",{value:30},"Every 30 seconds",-1),i("option",{value:60},"Every 1 minute",-1),i("option",{value:300},"Every 5 minutes",-1),i("option",{value:600},"Every 10 minutes",-1),i("option",{value:1800},"Every 30 minutes",-1),i("option",{value:3600},"Every 1 hour",-1)])],512),[[f,T.value.interval_seconds]])]),i("div",null,[t[28]||(t[28]=i("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Notification Email (optional) ",-1)),x(i("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>T.value.notification_email=e),type:"email",class:"input",placeholder:"alerts@example.com"},null,512),[[b,T.value.notification_email]])])],32)]),_:1},8,["show"]),s(U,{show:A.value,title:"Edit Website",onClose:t[14]||(t[14]=e=>A.value=!1)},{footer:n(()=>[i("button",{onClick:t[13]||(t[13]=e=>A.value=!1),class:"btn-secondary"},"Cancel"),i("button",{onClick:pe,disabled:H.value,class:"btn-primary"},[H.value?(a(),o("svg",me,[...t[36]||(t[36]=[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):r("",!0),t[37]||(t[37]=g(" Save Changes ",-1))],8,ve)]),default:n(()=>[i("form",{onSubmit:d(pe,["prevent"]),class:"space-y-4"},[i("div",null,[t[31]||(t[31]=i("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[g(" URL "),i("span",{class:"text-danger-500"},"*")],-1)),x(i("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>T.value.url=e),type:"url",class:"input",placeholder:"https://example.com",required:""},null,512),[[b,T.value.url]])]),i("div",null,[t[32]||(t[32]=i("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Name (optional) ",-1)),x(i("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>T.value.name=e),type:"text",class:"input",placeholder:"My Website"},null,512),[[b,T.value.name]])]),i("div",null,[t[34]||(t[34]=i("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Check Interval ",-1)),x(i("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>T.value.interval_seconds=e),class:"select"},[...t[33]||(t[33]=[i("option",{value:30},"Every 30 seconds",-1),i("option",{value:60},"Every 1 minute",-1),i("option",{value:300},"Every 5 minutes",-1),i("option",{value:600},"Every 10 minutes",-1),i("option",{value:1800},"Every 30 minutes",-1),i("option",{value:3600},"Every 1 hour",-1)])],512),[[f,T.value.interval_seconds]])]),i("div",null,[t[35]||(t[35]=i("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Notification Email (optional) ",-1)),x(i("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>T.value.notification_email=e),type:"email",class:"input",placeholder:"alerts@example.com"},null,512),[[b,T.value.notification_email]])])],32)]),_:1},8,["show"]),s(I,{show:V.value,title:"Delete Website",message:`Are you sure you want to delete '${null==(m=R.value)?void 0:m.url}'? This action cannot be undone and all monitoring data will be lost.`,"confirm-text":"Delete",loading:H.value,onConfirm:ge,onCancel:t[15]||(t[15]=e=>V.value=!1)},null,8,["show","message","loading"])])}}};export{pe as default};
