import{b as e,r as a}from"./vendor-CszhsB1H.js";import{d as t}from"./index-BWaFKzkF.js";const l=e("logs",()=>{const e=a([]),l=a(!1),u=a(null),s=a(!0),o=a(1),n=a(50);return{logs:e,loading:l,error:u,hasMore:s,currentPage:o,pageSize:n,fetchLogs:async function(a={},r=!1){var v,d;l.value=!0,u.value=null;try{const l=new URLSearchParams;a.websiteId&&l.append("websiteId",a.websiteId),a.from&&l.append("from",a.from),a.to&&l.append("to",a.to),a.status&&l.append("status",a.status),l.append("page",r?o.value:1),l.append("limit",n.value);const u=await t.get(`/logs?${l.toString()}`);return r?e.value=[...e.value,...u.data]:(e.value=u.data,o.value=1),s.value=u.data.length===n.value,r&&o.value++,{success:!0}}catch(i){return u.value=(null==(d=null==(v=i.response)?void 0:v.data)?void 0:d.error)||"Failed to fetch logs",{success:!1,error:u.value}}finally{l.value=!1}},addRealtimeLog:function(a){e.value.unshift(a),e.value.length>1e3&&(e.value=e.value.slice(0,1e3))},clearLogs:function(){e.value=[],o.value=1,s.value=!0}}});export{l as u};
